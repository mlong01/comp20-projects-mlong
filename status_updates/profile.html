<!DOCTYPE html>

<html>

<head>
<title>Fecesbook</title>
	<script>
		function init() {
			console.log("into init");

			for(key in localStorage) {
				updatestatus(localStorage[key]);
			}
			
		}

		function put_in_storage() {
			var status = document.getElementById('status');
			var dayTime = get_date_string();
			var msg = document.getElementById('msg').value;

			msg = (dayTime + ' - ' + msg);

			var keyTime = new Date().getTime();

			localStorage.setItem(keyTime, msg);

			updatestatus(msg);			
		}

		function updatestatus(msg) {
			var para = document.createElement("p");
			var msgnode = document.createTextNode(msg);
			para.appendChild(msgnode);
			
			var status = document.getElementById('status');
			status.insertBefore(para, status.firstChild);

			document.getElementById('msg').value = "";
		}

		function get_date_string()
		{
			var today = new Date();
			var month = today.getMonth() + 1;
			var day = today.getDate();
			var year = today.getFullYear();
			var hour = today.getHours();
			var min = today.getMinutes();

			var msgnode = (month + '/' + day + '/' + year + ' ' + hour + ':' + min);
			return msgnode;
		}

	</script>
</head>

<body onload="init()">
	<h1>Fecebook</h1>
	<div id="nav">
		<ul>
			<li id="home">Home</li>
			<li id="groups">Groups</li>
			<li id="profile">Profile</li>
			<li id="contacts">Contacts</li>
			<li id="inbox">Inbox</li>
			<li id="applications">Applications</li>
		</ul>
	</div>
	<h2 id="fullname">Barney Gumble</h2>
	<h3>What are you thinking about? <input type="text" id="msg" name="msg" size="30" onchange="put_in_storage()"/></h3>
	<h3>Updates</h3>
	<div id="status">
	</div>
	<div id="yesterday">
		<h3>Updates from yesterday:</h3>
		<ul>
			<li>Alice is now connected to Bob</li>
			<li>Tom recommends Jerry</li>
			<li>Harry just returned from a trip from Curaco</li>
		</ul>
	</div>
	<div id="longlongtimeago">
		<h3>Updates from long long time ago:</h3>
		<ul>
			<li>Harry just returned from a trip from Curaco</li>
			<li>Joan is now connected to Mary</li>
			<li>Steven is now connected to James</li>
		</ul>
	</div>
</body>
</html>
